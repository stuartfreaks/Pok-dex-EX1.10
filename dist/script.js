const pokemonRepository=function(){let d=[],e=document.getElementById("loading-message"),a=document.querySelector("#modal-container");function b(){return d}function f(b){c(b).then(function(){a.innerHTML="";let i=document.createElement("div");i.classList.add("modal");let j=document.createElement("button");j.classList.add("modal-close"),j.innerHTML="Close",j.addEventListener("click",h);let c=document.createElement("div");c.classList.add("pokemon-nav"),0===k(b)&&c.classList.add("pokemon-nav--disabled"),c.innerText="Previous",c.addEventListener("click",()=>l(b));let e=document.createElement("div");e.classList.add("pokemon-nav"),k(b)===d.length-1&&e.classList.add("pokemon-nav--disabled"),e.innerText="Next",e.addEventListener("click",()=>m(b));let f=document.createElement("div");f.classList.add("pokemon-info");let g=document.createElement("div");g.classList.add("pokemon-container");let o=document.createElement("h1");o.innerText=b.name;let n=document.createElement("img");n.src=b.imageUrl,n.style.width="300px";let p=document.createElement("p");p.innerText="Height: "+b.height/10+"m",i.appendChild(j),f.appendChild(o),f.appendChild(n),f.appendChild(p),g.appendChild(c),g.appendChild(f),g.appendChild(e),i.appendChild(g),a.appendChild(i),a.classList.add("is-visible")})}let g;function h(){a.classList.remove("is-visible"),g&&(g(),g=null)}function c(a){return i(),fetch(a.detailsUrl).then(function(a){return a.json()}).then(function(b){a.imageUrl=b.sprites.other.dream_world.front_default,a.height=b.height,a.types=b.types,j()}).catch(function(a){console.error(a),j()})}function i(){e.innerText="Loading..."}function j(){e.innerText=""}function k(a){return d.findIndex(b=>b.name===a.name)}function l(a){f(d[k(a)-1])}function m(a){f(d[k(a)+1])}return window.addEventListener("keydown",b=>{"Escape"===b.key&&a.classList.contains("is-visible")&&h()}),a.addEventListener("click",b=>{b.target===a&&h()}),{getAll:b,addListItem:function(b){let d=document.querySelector(".pokemon-list"),c=document.createElement("li"),a=document.createElement("button");a.innerText=b.name,a.classList.add("my-button"),c.appendChild(a),d.appendChild(c),function(a,b){a.addEventListener("click",function(){f(b)})}(a,b)},loadList:function(){return i(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(a){return a.json()}).then(function(a){a.results.forEach(function(a){var b;"object"==typeof(b={name:a.name[0].toUpperCase()+a.name.slice(1),detailsUrl:a.url})&&"name"in b?d.push(b):console.log("pokemon is not correct")}),j()}).catch(function(a){console.error(a),j()})},loadDetails:c}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(a){pokemonRepository.addListItem(a)})})